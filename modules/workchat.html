<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workchat - App.vn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style type="text/tailwindcss">
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
        }

        /* Sidebar Styles (Copied from Automation.html) */
        :root {
            --sidebar-width: 4rem;
        }

        .sidebar-pro-style {
            background-color: #1B3DA1;
            background-image:
                radial-gradient(80% 40% at 100% 0%, rgba(255, 255, 255, 0.2) 0%, transparent 100%),
                radial-gradient(60% 40% at 0% 100%, rgba(255, 255, 255, 0.1) 0%, transparent 100%),
                linear-gradient(160deg, #1B3DA1 0%, #0b2060 100%);
        }

        .sidebar-icon-active {
            color: #FFFFFF;
            background-color: rgba(255, 255, 255, 0.15);
        }

        .sidebar-text {
            transition: opacity 0.2s;
            white-space: nowrap;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: #E5E7EB;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        /* Chat Specifics */
        .chat-filter-item {
            @apply flex items-center gap-3 px-3 py-2 text-gray-500 hover:text-gray-900 cursor-pointer rounded-lg hover:bg-gray-100 transition-colors text-sm font-medium;
        }

        .chat-filter-item.active {
            @apply bg-blue-50 text-[#1B3DA1];
        }

        .message-bubble-sender {
            border-radius: 12px 12px 12px 0;
        }

        .message-bubble-receiver {
            border-radius: 12px 12px 0 12px;
        }
    </style>
</head>

<body class="flex h-screen overflow-hidden text-gray-700">

    <!-- 1. Global Sidebar Container -->
    <div id="sidebar"
        class="w-16 sidebar-pro-style text-white flex flex-col pt-3 border-r border-[#1B3DA1] z-50 shadow-lg shadow-blue-900/20 transition-all duration-300 ease-in-out relative flex-shrink-0">

        <!-- Logo Area with Mega Menu -->
        <div class="px-3 mb-8 flex items-center h-10 w-full relative group">
            <div onclick="window.location.href='../index.html'"
                class="h-10 w-10 min-w-[2.5rem] bg-white rounded-lg flex items-center justify-center text-[#1B3DA1] font-bold text-xl shadow-lg shadow-black/10 z-10 cursor-pointer">
                <img src="../logo.png" alt="App.vn Logo" class="w-7 h-7 object-contain">
            </div>
            <span class="sidebar-text ml-3 font-bold text-xl text-white opacity-0 pl-1">App.vn</span>

            <!-- Mega Menu -->
            <div
                class="absolute top-0 left-14 w-60 bg-white shadow-2xl rounded-xl border border-blue-100 p-2 hidden group-hover:block z-[9999] origin-top-left transition-all duration-200">
                <div class="space-y-1">
                    <!-- Sales -->
                    <a href="sales.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-blue-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-blue-100/50 flex items-center justify-center text-[#1B3DA1] group-hover/item:bg-[#1B3DA1] group-hover/item:text-white transition">
                            <i class="fa-solid fa-cart-shopping text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-[#1B3DA1]">Quản lý bán
                            hàng</span>
                    </a>
                    <a href="automation.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-purple-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-purple-100/50 flex items-center justify-center text-purple-600 group-hover/item:bg-purple-600 group-hover/item:text-white transition">
                            <i class="fa-solid fa-robot text-xs"></i>
                        </div>
                        <span
                            class="text-sm font-semibold text-gray-700 group-hover/item:text-purple-600">Automation</span>
                    </a>
                    <a href="customer.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-green-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-green-100/50 flex items-center justify-center text-green-600 group-hover/item:bg-green-600 group-hover/item:text-white transition">
                            <i class="fa-solid fa-user-tie text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-green-600">Khách
                            hàng</span>
                    </a>
                    <a href="workchat.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-pink-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-pink-100/50 flex items-center justify-center text-pink-500 group-hover/item:bg-pink-500 group-hover/item:text-white transition">
                            <i class="fa-regular fa-comments text-xs"></i>
                        </div>
                        <span
                            class="text-sm font-semibold text-gray-700 group-hover/item:text-pink-500">WorkChatV2</span>
                    </a>
                    <a href="product.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-amber-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-amber-100/50 flex items-center justify-center text-amber-500 group-hover/item:bg-amber-500 group-hover/item:text-white transition">
                            <i class="fa-solid fa-box text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-amber-500">Sản
                            phẩm</span>
                    </a>
                    <a href="crm.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-rose-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-rose-100/50 flex items-center justify-center text-rose-500 group-hover/item:bg-rose-500 group-hover/item:text-white transition">
                            <i class="fa-solid fa-filter text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-rose-500">CRM</span>
                    </a>

                    <!-- New Modules -->
                    <a href="promotions.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-red-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-red-100/50 flex items-center justify-center text-red-500 group-hover/item:bg-red-500 group-hover/item:text-white transition">
                            <i class="fa-solid fa-tags text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-red-500">Ưu đãi</span>
                    </a>

                    <a href="#"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-yellow-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-yellow-100/50 flex items-center justify-center text-yellow-600 group-hover/item:bg-yellow-600 group-hover/item:text-white transition">
                            <i class="fa-solid fa-crown text-xs"></i>
                        </div>
                        <span
                            class="text-sm font-semibold text-gray-700 group-hover/item:text-yellow-600">Loyalty</span>
                    </a>

                    <a href="collaborator.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-cyan-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-cyan-100/50 flex items-center justify-center text-cyan-600 group-hover/item:bg-cyan-600 group-hover/item:text-white transition">
                            <i class="fa-solid fa-users text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-cyan-600">Cộng tác
                            viên</span>
                    </a>

                    <a href="combo.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-orange-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-orange-100/50 flex items-center justify-center text-orange-500 group-hover/item:bg-orange-500 group-hover/item:text-white transition">
                            <i class="fa-solid fa-layer-group text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-orange-500">Combo</span>
                    </a>

                    <a href="warehouse.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-gray-100 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-gray-200/50 flex items-center justify-center text-gray-600 group-hover/item:bg-gray-600 group-hover/item:text-white transition">
                            <i class="fa-solid fa-warehouse text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-gray-600">Kho hàng</span>
                    </a>

                    <a href="rfm.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-violet-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-violet-100/50 flex items-center justify-center text-violet-600 group-hover/item:bg-violet-600 group-hover/item:text-white transition">
                            <i class="fa-solid fa-chart-pie text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-violet-600">RFM</span>
                    </a>

                    <a href="debt.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-indigo-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-indigo-100/50 flex items-center justify-center text-indigo-600 group-hover/item:bg-indigo-600 group-hover/item:text-white transition">
                            <i class="fa-solid fa-file-invoice-dollar text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-indigo-600">Công
                            nợ</span>
                    </a>

                    <a href="einvoice.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-blue-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-blue-100/50 flex items-center justify-center text-blue-500 group-hover/item:bg-blue-500 group-hover/item:text-white transition">
                            <i class="fa-solid fa-receipt text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-blue-500">Hóa đơn điện
                            tử</span>
                    </a>

                    <a href="warranty.html"
                        class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-teal-50 transition group/item">
                        <div
                            class="w-8 h-8 rounded-full bg-teal-100/50 flex items-center justify-center text-teal-600 group-hover/item:bg-teal-600 group-hover/item:text-white transition">
                            <i class="fa-solid fa-shield-halved text-xs"></i>
                        </div>
                        <span class="text-sm font-semibold text-gray-700 group-hover/item:text-teal-600">Bảo hành</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Menu Items -->
        <nav class="w-full flex-1 flex flex-col gap-2 px-3 overflow-y-auto overflow-x-hidden">
            <!-- Trigger -->
            <a href="#"
                class="flex items-center h-10 px-2 rounded-lg hover:bg-white/10 text-blue-200 hover:text-white transition"
                title="Trigger">
                <div class="min-w-[1.5rem] flex items-center justify-center"><i class="fa-solid fa-bolt"></i></div>
                <span class="sidebar-text ml-3 text-sm opacity-0">Trigger</span>
            </a>
            <!-- Workchat (Active) -->
            <a href="#" class="flex items-center h-10 px-2 rounded-lg sidebar-icon-active text-white transition"
                title="Workchat">
                <div class="min-w-[1.5rem] flex items-center justify-center"><i class="fa-regular fa-comments"></i>
                </div>
                <span class="sidebar-text ml-3 text-sm opacity-0">Workchat</span>
            </a>
            <!-- Customers -->
            <a href="#"
                class="flex items-center h-10 px-2 rounded-lg hover:bg-white/10 text-blue-200 hover:text-white transition"
                title="Customers">
                <div class="min-w-[1.5rem] flex items-center justify-center"><i class="fa-regular fa-user"></i></div>
                <span class="sidebar-text ml-3 text-sm opacity-0">Customers</span>
            </a>
        </nav>

        <!-- Toggle Footer -->
        <div class="p-4 border-t border-white/10 mt-auto">
            <button onclick="toggleSidebar()"
                class="w-full flex items-center justify-center h-10 rounded-lg hover:bg-white/10 text-blue-200 hover:text-white transition">
                <i class="fa-solid fa-chevron-left" id="toggle-icon"></i>
            </button>
        </div>
    </div>

    <!-- 2. Chat List Sidebar (Left Panel) -->
    <div class="w-64 bg-white border-r border-gray-200 flex flex-col flex-shrink-0">
        <!-- Header Tabs -->
        <div class="flex items-center px-4 border-b border-gray-100">
            <button class="py-4 text-sm font-bold text-[#1B3DA1] border-b-2 border-[#1B3DA1] mr-6">Live Chat</button>
            <button class="py-4 text-sm font-medium text-gray-500 hover:text-gray-700 transition">Bots</button>
        </div>

        <!-- Filter Header -->
        <div class="px-5 py-4 flex items-center justify-between group cursor-pointer">
            <h3 class="font-bold text-base text-gray-800">Filter</h3>
            <button class="text-gray-400 hover:text-[#1B3DA1] transition"><i class="fa-solid fa-gear"></i></button>
        </div>

        <!-- Filter List -->
        <div class="flex-1 overflow-y-auto px-3 space-y-1">
            <div class="chat-filter-item active">
                <div class="w-6 flex justify-center"><i class="fa-regular fa-comment-dots"></i></div>
                <span>All</span>
            </div>
            <div class="chat-filter-item">
                <div class="w-6 flex justify-center"><i class="fa-solid fa-user-lock"></i></div>
                <span>Riêng tư</span>
            </div>
            <div class="chat-filter-item">
                <div class="w-6 flex justify-center"><i class="fa-solid fa-users"></i></div>
                <span>Nhóm</span>
            </div>
            <div class="chat-filter-item">
                <div class="w-6 flex justify-center"><i class="fa-regular fa-envelope"></i></div>
                <span>Chưa đọc</span>
            </div>
            <div class="chat-filter-item">
                <div class="w-6 flex justify-center"><i class="fa-solid fa-thumbtack"></i></div>
                <span>Đã ghim</span>
            </div>
            <div class="chat-filter-item">
                <div class="w-6 flex justify-center"><i class="fa-solid fa-flag"></i></div>
                <span>Đánh dấu</span>
            </div>
            <div class="chat-filter-item">
                <div class="w-6 flex justify-center"><i class="fa-solid fa-at"></i></div>
                <span>Nhắc đến</span>
            </div>

            <!-- Labels Section -->
            <div class="mt-6 pt-4 border-t border-gray-50 pb-2">
                <div class="flex items-center justify-between text-sm font-semibold text-gray-500 mb-3 px-3">
                    <span>Nhãn</span>
                    <button class="hover:text-[#1B3DA1] transition"><i class="fa-solid fa-plus"></i></button>
                </div>
                <div class="space-y-1">
                    <div class="chat-filter-item">
                        <div class="w-6 flex justify-center"><i class="fa-solid fa-tag text-gray-400"></i></div>
                        <span>Threads &...</span>
                    </div>
                    <div class="chat-filter-item">
                        <div class="w-6 flex justify-center"><i class="fa-regular fa-circle-check text-gray-400"></i>
                        </div>
                        <span>Done</span>
                    </div>
                    <div class="chat-filter-item">
                        <div class="w-6 flex justify-center"><i class="fa-solid fa-archive text-gray-400"></i></div>
                        <span>Lưu trữ</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 3. Conversation List (Middle-Left) -->
    <!-- The user image implies the "Filter" menu IS the sidebar, and the conversation list replaces it or is adjacent. 
         Looking at the image, it seems there are 4 columns: Global Nav | Filter Menu | Chat List | Main Chat | Right Panel.
         Wait, looking closer at "uploaded_image_1768360653508.png":
         Col 1: Global Nav (Icons only) - Dark Blue
         Col 2: "Filter" Sidebar - White (All, Riêng tư...)
         Col 3: "List of Chats" - White (TrangDT...) - Looks like this is the 3rd column.
         Col 4: Main Chat - Light Gray BG
         Col 5: Details Panel - White
         
         The previous implementation had Col 2 and 3 merged. I will split them to match the image precisely.
    -->
    <div class="w-80 bg-white border-r border-gray-200 flex flex-col flex-shrink-0">
        <!-- Search -->
        <div class="p-3 border-b border-gray-100 flex items-center gap-2">
            <div class="relative flex-1">
                <i
                    class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"></i>
                <input type="text" placeholder="Search..."
                    class="w-full pl-8 pr-3 py-2 bg-gray-100 border-none rounded-lg text-sm focus:outline-none focus:ring-1 focus:ring-blue-500">
                <button class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"><i
                        class="fa-solid fa-plus"></i></button>
            </div>
        </div>

        <!-- Chat Items (Generated dynamically) -->
        <div class="flex-1 overflow-y-auto" id="conversation-list"></div>
    </div>


    <!-- 4. Main Chat Area (Center) -->
    <div class="flex-1 flex flex-col bg-white min-w-0 relative">
        <!-- Header -->
        <div class="bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between flex-shrink-0">
            <div class="flex items-center gap-3">
                <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=100&auto=format&fit=crop"
                    class="w-10 h-10 rounded-full object-cover">
                <div>
                    <h3 class="font-bold text-gray-900">TrangDT</h3>
                    <p class="text-xs text-gray-500">cuongtv1906@gmail.com</p>
                </div>
            </div>

            <div class="flex items-center gap-1">
                <button class="p-2 text-gray-400 hover:bg-gray-100 rounded-full"><i
                        class="fa-solid fa-magnifying-glass"></i></button>
                <button class="p-2 text-gray-400 hover:bg-gray-100 rounded-full"><i
                        class="fa-solid fa-video"></i></button>
                <button class="p-2 text-gray-400 hover:bg-gray-100 rounded-full"><i
                        class="fa-solid fa-ellipsis"></i></button>
            </div>
        </div>

        <!-- Sub Header Actions -->
        <div class="px-4 py-2 border-b border-gray-100 flex items-center gap-4 text-sm text-gray-600">
            <button class="flex items-center gap-1 text-blue-600 font-medium"><i class="fa-solid fa-comment"></i>
                Chat</button>
            <button class="flex items-center gap-1 hover:text-gray-900"><i class="fa-solid fa-file"></i> File</button>
            <button class="flex items-center gap-1 hover:text-gray-900"><i class="fa-solid fa-file-word"></i>
                Docs</button>
            <button class="hover:text-gray-900"><i class="fa-solid fa-plus"></i></button>
        </div>

        <!-- Messages Area -->
        <div class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50/50">
            <!-- Message 1 -->
            <div class="flex items-start gap-3">
                <div
                    class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                    H</div>
                <div class="bg-blue-600 text-white px-4 py-2 rounded-2xl rounded-tl-none max-w-[70%] text-sm">
                    test
                </div>
            </div>

            <!-- Message 2 -->
            <div class="flex items-start gap-3">
                <div
                    class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                    H</div>
                <div class="bg-blue-600 text-white px-4 py-2 rounded-2xl rounded-tl-none max-w-[70%] text-sm">
                    ok ngon hơn rồi đấy
                </div>
            </div>

            <!-- Message 3 (Receiver) -->
            <div class="flex flex-row-reverse items-start gap-3">
                <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=100&auto=format&fit=crop"
                    class="w-8 h-8 rounded-full object-cover flex-shrink-0">
                <div
                    class="bg-white border border-gray-200 text-gray-800 px-4 py-2 rounded-2xl rounded-tr-none max-w-[70%] text-sm font-medium">
                    <span class="text-blue-600">@Support AppVn</span> chăm
                </div>
            </div>

            <!-- Bulk Messages (1-10) -->
            <!-- Creating a loop effectively in HTML -->
            <div class="space-y-2">
                <div class="flex items-start gap-3">
                    <div
                        class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                        H</div>
                    <div
                        class="bg-blue-600 text-white w-8 h-8 flex items-center justify-center rounded-lg rounded-tl-none text-sm font-bold">
                        1</div>
                </div>
                <div class="flex items-start gap-3">
                    <div
                        class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                        H</div>
                    <div
                        class="bg-blue-600 text-white w-8 h-8 flex items-center justify-center rounded-lg rounded-tl-none text-sm font-bold">
                        2</div>
                </div>
                <div class="flex items-start gap-3">
                    <div
                        class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                        H</div>
                    <div
                        class="bg-blue-600 text-white w-8 h-8 flex items-center justify-center rounded-lg rounded-tl-none text-sm font-bold">
                        3</div>
                </div>
                <div class="flex items-start gap-3">
                    <div
                        class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                        H</div>
                    <div
                        class="bg-blue-600 text-white w-8 h-8 flex items-center justify-center rounded-lg rounded-tl-none text-sm font-bold">
                        4</div>
                </div>
                <div class="flex items-start gap-3">
                    <div
                        class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                        H</div>
                    <div
                        class="bg-blue-600 text-white w-8 h-8 flex items-center justify-center rounded-lg rounded-tl-none text-sm font-bold">
                        5</div>
                </div>
                <div class="flex items-start gap-3">
                    <div
                        class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                        H</div>
                    <div
                        class="bg-blue-600 text-white w-8 h-8 flex items-center justify-center rounded-lg rounded-tl-none text-sm font-bold">
                        6</div>
                </div>
                <div class="flex items-start gap-3">
                    <div
                        class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                        H</div>
                    <div
                        class="bg-blue-600 text-white w-8 h-8 flex items-center justify-center rounded-lg rounded-tl-none text-sm font-bold">
                        7</div>
                </div>
                <div class="flex items-start gap-3">
                    <div
                        class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                        H</div>
                    <div
                        class="bg-blue-600 text-white w-8 h-8 flex items-center justify-center rounded-lg rounded-tl-none text-sm font-bold">
                        8</div>
                </div>
                <div class="flex items-start gap-3">
                    <div
                        class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                        H</div>
                    <div
                        class="bg-blue-600 text-white w-8 h-8 flex items-center justify-center rounded-lg rounded-tl-none text-sm font-bold">
                        9</div>
                </div>
                <div class="flex items-start gap-3">
                    <div
                        class="w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                        H</div>
                    <div class="bg-blue-600 text-white px-3 py-1.5 rounded-lg rounded-tl-none text-sm font-bold">10
                    </div>
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="p-4 bg-white border-t border-gray-200">
            <div class="flex items-end gap-2">
                <div
                    class="flex-1 relative border border-blue-300 rounded-lg overflow-hidden focus-within:ring-1 focus-within:ring-blue-500 transition-all">
                    <div class="px-3 py-2 text-gray-400 text-xs border-l-2 border-blue-500 bg-white">
                        Type the content here!
                    </div>
                </div>
                <button class="p-2 text-gray-500 hover:bg-gray-100 rounded"><i class="fa-regular fa-image"></i></button>
                <button class="p-2 text-gray-500 hover:bg-gray-100 rounded"><i class="fa-solid fa-plus"></i></button>
                <button class="p-2 text-blue-600 hover:bg-blue-50 rounded"><i
                        class="fa-solid fa-paper-plane"></i></button>
            </div>
            <!-- Up Arrow Button floating -->
            <button
                class="absolute bottom-20 left-1/2 -translate-x-1/2 w-8 h-8 bg-white border border-gray-200 rounded-full shadow-sm flex items-center justify-center text-gray-500 hover:bg-gray-50">
                <i class="fa-solid fa-arrow-up"></i>
            </button>
        </div>
    </div>


    <!-- 5. Right Profile Panel -->
    <div class="w-80 bg-white border-l border-gray-200 flex flex-col flex-shrink-0">
        <!-- Profile Header -->
        <div class="p-8 flex flex-col items-center border-b border-gray-100">
            <div class="relative mb-3">
                <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=150&auto=format&fit=crop"
                    class="w-20 h-20 rounded-full object-cover">
            </div>
            <h3 class="font-bold text-lg text-gray-900">TrangDT</h3>
            <p class="text-xs text-gray-500">cuongtv1906@gmail.com</p>

            <div class="flex gap-4 mt-4 text-gray-400">
                <button class="p-2 hover:bg-gray-100 rounded-lg"><i class="fa-solid fa-magnifying-glass"></i></button>
                <button class="p-2 hover:bg-gray-100 rounded-lg"><i class="fa-regular fa-user"></i></button>
                <button class="p-2 hover:bg-gray-100 rounded-lg"><i class="fa-solid fa-bell"></i></button>
                <button class="p-2 hover:bg-gray-100 rounded-lg"><i class="fa-solid fa-ellipsis"></i></button>
            </div>
        </div>

        <!-- Accordions -->
        <div class="flex-1 overflow-y-auto">
            <!-- Images & Videos -->
            <div class="p-4 py-3 cursor-pointer hover:bg-gray-50">
                <div class="flex items-center justify-between mb-2">
                    <span class="font-bold text-xs text-gray-700">Images & Videos</span>
                    <span class="text-[10px] text-blue-600 flex items-center gap-1">Tất cả <i
                            class="fa-solid fa-chevron-right text-[8px]"></i></span>
                </div>
                <div class="text-center py-4 text-xs text-gray-400 font-light">
                    Không có dữ liệu
                </div>
            </div>

            <!-- Files & Links -->
            <div class="p-4 py-3 cursor-pointer hover:bg-gray-50">
                <div class="flex items-center justify-between mb-2">
                    <span class="font-bold text-xs text-gray-700">Files & Links</span>
                    <span class="text-[10px] text-blue-600 flex items-center gap-1">Tất cả <i
                            class="fa-solid fa-chevron-right text-[8px]"></i></span>
                </div>
                <div class="text-center py-4 text-xs text-gray-400 font-light">
                    Không có dữ liệu
                </div>
            </div>

            <!-- Config -->
            <div class="p-4 pt-2">
                <h4 class="font-bold text-xs text-gray-700 mb-3">Config</h4>

                <div class="flex items-center justify-between mb-3">
                    <span class="text-xs text-gray-600">Hide conversation</span>
                    <div class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" checked class="sr-only peer">
                        <div
                            class="w-7 h-4 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-[#8BC34A]">
                        </div>
                    </div>
                </div>

                <div class="flex items-center justify-between mb-4">
                    <span class="text-xs text-gray-600">Auto check spelling in word</span>
                    <div class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" checked class="sr-only peer">
                        <div
                            class="w-7 h-4 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-[#8BC34A]">
                        </div>
                    </div>
                </div>

                <div class="flex items-center gap-2 text-red-500 text-xs font-bold cursor-pointer hover:text-red-700">
                    <i class="fa-solid fa-trash-can"></i> Delete
                </div>
            </div>
        </div>
    </div>

    <!-- Top Right Corner Badge -->
    <div
        class="absolute top-3 right-3 w-8 h-8 rounded-full bg-[#8BC34A] flex items-center justify-center text-white font-bold shadow-md z-50">
        H
    </div>


    <script>
        const sidebar = document.getElementById('sidebar');
        const toggleIcon = document.getElementById('toggle-icon');
        const sidebarTexts = document.querySelectorAll('.sidebar-text');
        let isExpanded = false;

        function toggleSidebar() {
            isExpanded = !isExpanded;

            if (isExpanded) {
                // Expand
                sidebar.classList.remove('w-16');
                sidebar.classList.add('w-64');
                toggleIcon.classList.add('rotate-180');

                // Show text with slight delay
                setTimeout(() => {
                    sidebarTexts.forEach(text => {
                        text.classList.remove('opacity-0');
                    });
                }, 100);

            } else {
                // Collapse
                sidebarTexts.forEach(text => {
                    text.classList.add('opacity-0');
                });

                sidebar.classList.remove('w-64');
                sidebar.classList.add('w-16');
                toggleIcon.classList.remove('rotate-180');
            }
        }

        // --- Generate 20 Random Conversations ---
        const conversationList = document.getElementById('conversation-list');
        const names = ["TrangDT", "NguyenVH", "HoangNT", "MinhAnh Store", "LinhDan", "TuanPA", "PhuongThao", "Shop Baby", "TechWorld", "Fashionista", "MaiLinh", "QuangHuy", "ThanhTung", "VietAnh", "NgocDiep", "HaiDang", "ThuHa", "BaoChau", "DucThinh", "KhanhVy"];
        const messages = [
            "@Support AppVn chăm", "Sản phẩm này còn không shop?", "Đã gửi file đính kèm", "Cảm ơn bạn đã hỗ trợ nhiệt tình", "Voucher code: VIP2024",
            "Shop có ship hỏa tốc không?", "Đơn hàng của mình đi chưa ạ?", "Tư vấn giúp mình size M", "Gửi mình bảng màu nhé", "Cho mình xin giá sỉ",
            "Hàng đẹp lắm shop ơi", "Mình muốn đổi trả sản phẩm", "Check inbox giúp mình", "Alo shop ơi", "Có khuyến mãi gì không?",
            "Shop ở đâu vậy?", "Phí ship về HN bao nhiêu?", "Mình đặt nhầm màu rồi", "Xác nhận đơn giúp mình", "Hàng auth hay rep vậy?"
        ];
        const hashtags = ["#Support", "#VIP", "#Pending", "#Refund", "#New", "#Urgent", "#Done", "#Inquiry", "#Feedback", "#Order"];

        function getRandomItem(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function generateConversations() {
            let html = '';
            // Add fixed Active Item first (TrangDT)
            html += `
            <div class="px-4 py-3 bg-blue-50/50 hover:bg-gray-50 cursor-pointer flex gap-3 relative before:absolute before:left-0 before:top-0 before:bottom-0 before:w-1 before:bg-[#1B3DA1]">
                <div class="relative flex-shrink-0">
                    <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=100&auto=format&fit=crop" class="w-10 h-10 rounded-full object-cover">
                    <span class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-white rounded-full"></span>
                </div>
                <div class="flex-1 min-w-0">
                    <div class="flex justify-between items-baseline mb-0.5">
                        <h4 class="font-bold text-sm text-gray-900 truncate">TrangDT</h4>
                        <span class="text-[10px] text-gray-400">Tháng 12</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <p class="text-xs text-blue-600 truncate font-medium">@Support AppVn chăm</p>
                        <span class="text-[10px] text-gray-400">20</span>
                    </div>
                     <div class="mt-1 flex gap-1 flex-wrap">
                        <span class="bg-purple-100 text-purple-600 text-[9px] px-1.5 py-0.5 rounded font-medium">#VIP</span>
                        <span class="bg-blue-100 text-blue-600 text-[9px] px-1.5 py-0.5 rounded font-medium">#Support</span>
                    </div>
                </div>
            </div>`;

            // Generate 19 random items
            for (let i = 1; i < 20; i++) {
                const name = names[i];
                const msg = messages[i % messages.length]; // cycle through messages
                const time = `${Math.floor(Math.random() * 12) + 1}:${Math.floor(Math.random() * 60).toString().padStart(2, '0')}`;
                // Randomly select 1-2 hashtags
                const numHashtags = Math.random() > 0.7 ? 2 : 1;
                let itemHashtags = [];
                for (let h = 0; h < numHashtags; h++) {
                    itemHashtags.push(getRandomItem(hashtags));
                }
                // unique hashtags only
                itemHashtags = [...new Set(itemHashtags)];

                // Render hashtags
                const hashtagHtml = itemHashtags.map(tag => {
                    const colorClass = tag === '#VIP' ? 'bg-purple-100 text-purple-600' :
                        tag === '#Urgent' ? 'bg-red-100 text-red-600' :
                            'bg-gray-100 text-gray-600';
                    return `<span class="${colorClass} text-[9px] px-1.5 py-0.5 rounded font-medium">${tag}</span>`;
                }).join('');

                const avatarColor = ['bg-orange-100 text-orange-600', 'bg-blue-100 text-blue-600', 'bg-pink-100 text-pink-600', 'bg-green-100 text-green-600'];
                const randColor = getRandomItem(avatarColor);

                html += `
                <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer flex gap-3 group border-b border-gray-50 last:border-0">
                    <div class="relative flex-shrink-0">
                        <div class="w-10 h-10 rounded-full ${randColor} flex items-center justify-center font-bold text-sm">
                            ${name.charAt(0)}
                        </div>
                        ${Math.random() > 0.5 ? '<span class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-white rounded-full"></span>' : ''}
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex justify-between items-baseline mb-0.5">
                            <h4 class="font-bold text-sm text-gray-700 truncate group-hover:text-[#1B3DA1]">${name}</h4>
                            <span class="text-[10px] text-gray-400">${time}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <p class="text-xs text-gray-500 truncate">${msg}</p>
                        </div>
                        <div class="mt-1 flex gap-1 flex-wrap">
                            ${hashtagHtml}
                        </div>
                    </div>
                </div>`;
            }

            conversationList.innerHTML = html;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', generateConversations);
    </script>
</body>

</html>